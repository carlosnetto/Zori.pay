<?xml version="1.0" encoding="UTF-8"?>
<!--
    Copyright (c) 2026 Matera Systems, Inc. All rights reserved.

    This source code is the proprietary property of Matera Systems, Inc.
    and is protected by copyright law and international treaties.

    This software is NOT open source. Use, reproduction, or distribution
    of this code is strictly governed by the Matera Source License (MSL) v1.0.

    A copy of the MSL v1.0 should have been provided with this file.
    If not, please contact: licensing@matera.com
-->
<!--
    =====================================================================
    Zori.pay Database Migration Master Changelog
    =====================================================================

    Multi-country banking platform with blockchain integration.

    SCHEMAS:
    - registration_schema: Identity (people, contacts, addresses, documents, passkeys)
    - accounts_schema: Financial (accounts, currencies, blockchain wallets)
    - audit_schema: Compliance and audit trails

    MIGRATION SEQUENCE:
    v001: Database schemas and extensions
    v002: Registration/identity tables (people, contacts, addresses, documents, passkeys)
    v003: Account structure (holders, accounts, banking details, currency configs)
    v004: Audit trail (people_history)
    v005: Blockchain wallets (HD wallet support)
    v006: Reference data (countries, states, currencies, blockchains)

    NOTE: v007 (test data) and v008 (family & friends) were removed.
    Users are now onboarded via the KYC API, not migrations.

    DESIGN PRINCIPLES:
    - Monetary amounts stored as BIGINT in smallest currency unit
    - Currency decimals required (NOT NULL)
    - network_decimals only set when different from currency default
    =====================================================================
-->
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <!-- Infrastructure -->
    <include file="v001_schemas.xml" relativeToChangelogFile="true"/>

    <!-- Identity and Registration -->
    <include file="v002_registration.xml" relativeToChangelogFile="true"/>

    <!-- Financial Accounts -->
    <include file="v003_accounts.xml" relativeToChangelogFile="true"/>

    <!-- Audit Trail -->
    <include file="v004_audit.xml" relativeToChangelogFile="true"/>

    <!-- Blockchain Wallets -->
    <include file="v005_blockchain_wallets.xml" relativeToChangelogFile="true"/>

    <!-- Reference Data -->
    <include file="v006_seed_reference_data.xml" relativeToChangelogFile="true"/>

    <!-- Contact Types NOT NULL -->
    <include file="v007_contact_types_not_null.xml" relativeToChangelogFile="true"/>

    <!-- Phone/Email Types Reference Tables -->
    <include file="v008_contact_types.xml" relativeToChangelogFile="true"/>

</databaseChangeLog>
